{% extends "base.html" %}

{% block head %}
     <script type="text/javascript" src="{{ static_url("js/display.js")}}"></script>
     <script type="text/javascript" src="{{ static_url("js/competitor.js")}}"></script>
     <script type="text/javascript" src="{{ static_url("js/socket.js")}}"></script>
     <script type="text/javascript" src="http://www.google.com/jsapi?autoload={'modules':[{name:'maps',version:3,other_params:'sensor=true'}]}"></script>
     <script type="text/javascript" src="{{ static_url("js/gmaps.js")}}"></script>
{% end %}    

{% block body %}
<style type="text/css">
  .map{
    border: 1px solid #e3e3e3; 
  }
.number{
  font-size: 13px;
}
.cell-avatar {width:100px;position:relative;top:-80px;}
.cell-name {text-align:center;position:relative;top:-20px;width:240px;}
.cell-info {position:relative;top:-20px;width:260px;}

.infoitems {
  list-style:none;
}
.cell-name .infoitems li:nth-child(1) {font-weight:bold;font-size:26px;position:relative;top:-70px;}
.cell-name .infoitems li:nth-child(2) {position:relative;top: -45px;}
.cell-name .infoitems li:nth-child(2) a:first-child {padding-right:10px;}

.cell-info .infoitems li {padding:20px 10px;}
.cell-info .infoitems li:nth-child(2) {
  position: relative;
  top: -58px;
  left: 130px;
}
.cell-info .infoitems li:nth-child(3) {
  position: relative;
  top: -58px;
  left: 130px;
}
.cell-info .infoitems li:nth-child(4) {
  position: relative;
  top: -116px;
} 
.accordion-heading {height:95px;overflow: hidden;padding:8px 0px;}
.accordion-group {margin-bottom:15px;border:2px solid #DDD;}
.coolbox {
  background: white;
  padding: 5px;
  margin: 2px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  margin-bottom: 5px;
  margin-left: 5px;
  font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size: 14px;
  line-height: 20px;
  color: #333;
}
.accordion-heading .accordion-toggle {
  display: inline;
  padding: none;
}
</style>

<script type="text/javascript">
  var map;
  var sock;
  var raceId= '{% raw str(race['_id']) %}'
  {% from settings import settings %}
  var server_address = '{{"%s:%s" % (settings['server'],settings['port']) }}'


  $(document).ready(function(){
   map = new GMaps({
    div: '#basic_map',
    lat:   59.445075,
    lng:  10.250244,
    zoom: 9,
    zoomControl : true,
    zoomControlOpt: {
        style : 'SMALL',
        position: 'TOP_RIGHT'
    },
    panControl : false,
  });
   socketConnection();
});

</script>

<div class="row main" >
    <div class="container-fluid">
    <p><h3>{{escape(race['title']) }}</h3></p>
    <div class="span10 box pull-left map" style="height:800px" id="basic_map"></div>
    <div class="span6 pull-right display" >
      <table id='display' class="table table-striped table-bordered">
        <thead>
          <tr>
            <th>Name</th>
            <th>Sail Nr</th>
            <th>Speed</th>
            <th>Heading</th>
        </tr>
        </thead>
        <tbody id='display' >
        </tbody>
      </table>
    </div>
  </div>
</div>

{% end %}





